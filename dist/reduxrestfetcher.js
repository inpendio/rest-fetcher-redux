!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("lodash"),require("rest-fetcher-base")):"function"==typeof define&&define.amd?define(["exports","lodash","rest-fetcher-base"],t):t((e=e||self).reduxrestfetcher={},e.lodash,e.restFetcherBase)}(this,function(e,i,t){function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _toConsumableArray(e){return function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(e){var t=0<arguments.length&&void 0!==e?e:{};if(i.isObject(t))return t;var r=!1;if("string"==typeof t)try{r=JSON.parse(t.trim())}catch(e){console.log(e)}return r||i.toPlainObject(t)}var r=function(){function RFR(){var n;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,RFR),(n=_possibleConstructorReturn(this,_getPrototypeOf(RFR).call(this))).reducer=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:n.genererateInitialState(),t=1<arguments.length?arguments[1]:void 0;if(-1===t.type.indexOf(n.basePrefix))return e;var r=t.type.substring(n.basePrefix.length);return-1!==r.indexOf("_success")&&(r=r.replace("_success","")),-1!==r.indexOf("_fail")&&(r=r.replace("_fail","")),n.reducerPool[r](e,t)},n.constructGenericReducer=function(o){return function(e,t){var r=Object.assign({},e);return r[o]=Object.assign({},e[o]),t.loading?(r.isLoading&&r.isLoading.length||(r.isLoading=[]),r.isLoading.push(o)):(r.isLoading&&r.isLoading.length&&-1!==r.isLoading.indexOf(o)&&r.isLoading.splice(r.isLoading.indexOf(o),1),r.isLoading&&0===r.isLoading.length&&(r.isLoading=!1)),-1!==t.type.indexOf("_success")?(r[o].loading=!1,r[o].data=n.transformerPool[o](t.payload.data),r[o].ok=t.payload.msg.ok,r[o].redirected=t.payload.msg.redirected,r[o].status=t.payload.msg.status,r[o].type=t.payload.msg.type):-1!==t.type.indexOf("_fail")?(r[o].loading=!1,r[o].ok=t.payload.msg.ok,r[o].redirected=t.payload.msg.redirected,r[o].status=t.payload.msg.status,r[o].type=t.payload.msg.type,r[o].error=t.payload.error):(r[o].loading=!0,r[o].request=t.payload.request,r[o].params=t.payload.params),r}},n.genererateInitialState=function(){var t={isLoading:!1};return Object.keys(n.reducerPool).forEach(function(e){t[e]={request:"",params:"{}",data:n.transformerPool[e](),ok:void 0,redirected:void 0,status:0,type:""}}),t},n.actionStart=function(e,t,r){return{type:"".concat(n.basePrefix).concat(e),loading:!0,payload:{request:t,params:r}}},n.actionEnd=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return{type:"".concat(n.basePrefix).concat(e,"_success"),loading:!1,payload:{data:t,msg:r}}},n.actionError=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length?arguments[2]:void 0;return{type:"".concat(n.basePrefix).concat(e,"_fail"),loading:!1,payload:{msg:t,error:r}}},n.addToReducerPool=function(e,t){var r=e.reducer;n.reducerPool[t]=r||n.constructGenericReducer(t)},n.addToTransformerPool=function(e,t){var r=e.transformer,o=void 0===r?f:r;o&&i.isFunction(o)&&(n.transformerPool[t]=o)},n.getReducer=function(){return n.reducer},n.endpointCreationPool.push(n.addToReducerPool),n.endpointCreationPool.push(n.addToTransformerPool),n}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(RFR,t.Base),RFR}(),o=new r;e.Api=r,e.array=function array(e){var t=0<arguments.length&&void 0!==e?e:[];return i.isArray?t:i.toArray(t)},e.cumulativeArray=function cumulativeArray(a){return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];if(!e)return t;if(!a)return t.concat(i.isArray(e)?e:i.toArray(e));var n=_toConsumableArray(t);return e.forEach(function(r){var o=!1;t.forEach(function(e,t){r[a]===e[a]&&(n[t]=r,o=!0)}),o||n.push(r)}),n}},e.default=o,e.object=f,Object.defineProperty(e,"__esModule",{value:!0})});